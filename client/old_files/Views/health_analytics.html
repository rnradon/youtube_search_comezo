<div ng-include src="'Views/header_with_id.html'" style="padding-top: 20px; padding-left: 20px;"></div>

<div class="container">
<script>
   $(window).ready(function(){  
        // var access_token = window.location.search.substring(1);
        var unsorted_url = window.location.pathname.split('id=');
        unsorted_url = unsorted_url[1].split('/access_token=');
      
        console.log(unsorted_url)
        var id = unsorted_url[0]
        var access_token = unsorted_url[1]
        $.ajax({ 
                // url: '/api/gym_users?' + access_token ,
                url: '/api/gym_users?access_token=' + access_token,
                context: document.body,
                success: function(response){
     
                 document.getElementById("page_view").style.display = "block";
                 console.log("SUCCESS " + response)
                 
              },
                error: function (response) {
                  // document.getElementById("error").style.display = "block";
                  // $('#error').delay(4000).fadeOut(300);
                  // var resp = response.responseText
                  // console.log(resp)
                  // console.log(response)
                  alert("You are not authenticated to view this page")
                  setTimeout(function() { window.location.replace('/'); }, 0000)
                },
                cache: false,
              });
        });
</script>
<div ng-controller="health_analytics_controller">
<h1 style="color: #52b352">{{users_json_data.name}}'s Health Analytics</h1>
<br/>
<br/>
<br/>
<div class = "col-md-12 col-sm-12 col-xs-12">
  <table class="table table-striped table-hover" style="background-color: antiquewhite;
    box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);">
    <thead >
      <tr>
      <div class="col-sm-1">
        <th style="text-align: center;">Weight</th>
        </div>

        <div class="col-sm-1">
        <th style="text-align: center;">Impedance</th>
        </div>

        <div class="col-sm-1">
        <th style="text-align: center;">BMI</th>
        </div>

        <div class="col-sm-1">
        <th style="text-align: center;">Body Fat</th>
        </div>

        <div class="col-sm-1">
        <th style="text-align: center;">Muscle</th>
        </div>

        <div class="col-sm-1">
        <th style="text-align: center;">Water</th>
        </div>

        <div class="col-sm-1">
        <th style="text-align: center;">Protein</th>
        </div>

        <div class="col-sm-1">
        <th style="text-align: center;">Bone Mass</th>
        </div>

        <div class="col-sm-1">
        <th style="text-align: center;">BMR</th>
        </div>

        <div class="col-sm-1">
        <th style="text-align: center;">Visceral Fat</th>
        </div>

        <div class="col-sm-1">
        <th style="text-align: center;">Date & Time</th>
        </div>        
      </tr>
    </thead>
    <tbody>
      <tr ng-repeat="user in users_health_data" style="text-align: center;">
        <td>{{user.weight}}</td>
        <td>{{user.impedance}}</td>
        <td>{{user.BMI}}</td>
        <td>{{user.body_fat}}</td>
        <td>{{user.muscle}}</td>
        <td>{{user.water}}</td>
        <td>{{user.protein}}</td>
        <td>{{user.bone_mass}}</td>
        <td>{{user.BMR}}</td>
        <td>{{user.visceral_fat}}</td>
        <td><time datetime=>{{user.date_time}}</time></td>

      </tr>
    </tbody>
  </table>
  </div>
 </div>
</div>